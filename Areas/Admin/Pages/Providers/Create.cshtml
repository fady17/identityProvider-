@page "/Admin/Providers/Create"
@model Orjnz.IdentityProvider.Web.Areas.Admin.Pages.Providers.CreateModel
@{
    ViewData["Title"] = "Create New Provider";
}

<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a asp-page="/Index" asp-area="Admin">Admin Home</a></li>
        <li class="breadcrumb-item"><a asp-page="./Index">Providers</a></li>
        <li class="breadcrumb-item active" aria-current="page">@ViewData["Title"]</li>
    </ol>
</nav>

<div class="d-flex align-items-center mb-4">
    <div class="me-3">
        <i class="fas fa-plus-circle text-primary" style="font-size: 2rem;"></i>
    </div>
    <div>
        <h1 class="mb-1">@ViewData["Title"]</h1>
        <p class="text-muted mb-0">Add a new identity provider to the system</p>
    </div>
</div>

<div class="row">
    <div class="col-lg-8">
        <div class="card shadow-sm">
            <div class="card-header bg-light">
                <h5 class="card-title mb-0">
                    <i class="fas fa-info-circle me-2"></i>
                    Provider Information
                </h5>
            </div>
            <div class="card-body">
                <form method="post">
    @Html.AntiForgeryToken()
    
    <div asp-validation-summary="ModelOnly" class="alert alert-danger" role="alert"></div>

    <div class="mb-4">
        <label asp-for="ProviderInput.Name" class="form-label fw-semibold">
            Provider Name
            <span class="text-danger">*</span>
        </label>
        <input asp-for="ProviderInput.Name" 
               name="ProviderInput.Name"
               id="ProviderInput_Name"
               class="form-control" 
               placeholder="Enter the full provider name"
               autocomplete="off" 
               value="@Model.ProviderInput.Name" />
        <span asp-validation-for="ProviderInput.Name" class="text-danger"></span>
    </div>

    <div class="mb-4">
        <label asp-for="ProviderInput.ShortCode" class="form-label fw-semibold">
            Short Code
            <span class="text-danger">*</span>
        </label>
        <input asp-for="ProviderInput.ShortCode" 
               name="ProviderInput.ShortCode"
               id="ProviderInput_ShortCode"
               class="form-control" 
               placeholder="e.g., acme-corp"
               autocomplete="off" 
               value="@Model.ProviderInput.ShortCode" />
        <span asp-validation-for="ProviderInput.ShortCode" class="text-danger"></span>
    </div>
    
                @* <form method="post">
                    @Html.AntiForgeryToken()
                    
              
                    <div asp-validation-summary="ModelOnly" class="alert alert-danger" role="alert"></div>

                    <div class="mb-4">
                        <label asp-for="ProviderInput.Name" class="form-label fw-semibold">
                            Provider Name
                            <span class="text-danger">*</span>
                        </label>
                        <input asp-for="ProviderInput.Name" 
                               class="form-control" 
                               placeholder="Enter the full provider name"
                               autocomplete="off" />
                        <span asp-validation-for="ProviderInput.Name" class="text-danger"></span>
                        <div class="form-text">
                            <i class="fas fa-lightbulb me-1"></i>
                            The display name for this provider (e.g., "Acme Corporation", "University of Example")
                        </div>
                    </div>

                    <div class="mb-4">
                        <label asp-for="ProviderInput.ShortCode" class="form-label fw-semibold">
                            Short Code
                            <span class="text-danger">*</span>
                        </label>
                        <input asp-for="ProviderInput.ShortCode" 
                               class="form-control" 
                               placeholder="e.g., acme-corp"
                               autocomplete="off" />
                        <span asp-validation-for="ProviderInput.ShortCode" class="text-danger"></span>
                        <div class="form-text">
                            <i class="fas fa-key me-1"></i>
                            <strong>Must be unique.</strong> Used in system identifiers (API audiences, client IDs). 
                            Only lowercase letters, numbers, and hyphens allowed.
                        </div>
                    </div> *@

                    <div class="mb-4">
                        <label asp-for="ProviderInput.WebsiteDomain" class="form-label fw-semibold">
                            Website Domain
                        </label>
                        <div class="input-group">
                            <span class="input-group-text">
                                <i class="fas fa-globe"></i>
                            </span>
                            <input asp-for="ProviderInput.WebsiteDomain" 
                                   class="form-control" 
                                   placeholder="provider.example.com"
                                   autocomplete="off" />
                        </div>
                        <span asp-validation-for="ProviderInput.WebsiteDomain" class="text-danger"></span>
                        <div class="form-text">
                            <i class="fas fa-info-circle me-1"></i>
                            The primary domain for this provider's website (optional)
                        </div>
                    </div>

                    <div class="mb-4">
                        <div class="form-check form-switch">
                            <input asp-for="ProviderInput.IsActive" 
                                   class="form-check-input" 
                                   type="checkbox" 
                                   role="switch" />
                            <label asp-for="ProviderInput.IsActive" class="form-check-label fw-semibold">
                                Active Provider
                            </label>
                        </div>
                        <div class="form-text ms-3">
                            <i class="fas fa-toggle-on me-1"></i>
                            When enabled, this provider will be available for authentication and API access
                        </div>
                    </div>
                    
                    <hr class="my-4">
                    
                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save me-2"></i>Create Provider
                        </button>
                        <a asp-page="./Index" class="btn btn-outline-secondary">
                            <i class="fas fa-times me-2"></i>Cancel
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4">
        <div class="card border-info">
            <div class="card-header bg-info bg-opacity-10">
                <h6 class="card-title mb-0 text-info">
                    <i class="fas fa-question-circle me-2"></i>
                    What is a Provider?
                </h6>
            </div>
            <div class="card-body">
                <p class="small mb-2">
                    A provider represents an organization or service that uses this identity system for authentication.
                </p>
                <ul class="small mb-0 ps-3">
                    <li>Each provider gets unique identifiers</li>
                    <li>Providers can have multiple applications</li>
                    <li>Short codes are used in API configurations</li>
                    <li>Inactive providers cannot authenticate users</li>
                </ul>
            </div>
        </div>
        
        <div class="card border-warning mt-3">
            <div class="card-header bg-warning bg-opacity-10">
                <h6 class="card-title mb-0 text-warning">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    Important Notes
                </h6>
            </div>
            <div class="card-body">
                <ul class="small mb-0 ps-3">
                    <li><strong>Short codes cannot be changed</strong> after creation</li>
                    <li>Choose a descriptive but brief short code</li>
                    <li>Avoid special characters in short codes</li>
                    <li>Test with inactive status first</li>
                </ul>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    
    <script>
        // Clear any browser autocomplete that might interfere with validation
        document.addEventListener('DOMContentLoaded', function() {
            // Force browser to not remember form values
            if (window.history.replaceState) {
                window.history.replaceState(null, null, window.location.href);
            }
        });
    </script>
}